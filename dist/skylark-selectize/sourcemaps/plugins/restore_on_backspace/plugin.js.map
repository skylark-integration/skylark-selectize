{"version":3,"sources":["plugins/restore_on_backspace/plugin.js"],"names":["define","$","Selectize","options","original","self","this","text","option","settings","labelField","onKeyDown","e","index","keyCode","KEY_BACKSPACE","$control_input","val","$activeItems","length","caretPos","items","deleteSelection","setTextboxValue","apply","refreshOptions","preventDefault","arguments"],"mappings":";;;;;;;AAAAA,QACC,iBACA,mBACC,SAASC,EAAEC,GAiBZA,EAAUF,OAAO,uBAAwB,SAASG,GACjD,IAOKC,EAPDC,EAAOC,KAEXH,EAAQI,KAAOJ,EAAQI,MAAQ,SAASC,GACvC,OAAOA,EAAOF,KAAKG,SAASC,aAG7BJ,KAAKK,WACAP,EAAWC,EAAKM,UACb,SAASC,GACf,IAAIC,EAAOL,EACX,OAAII,EAAEE,UAAYC,eAA+C,KAA9BT,KAAKU,eAAeC,QAAiBX,KAAKY,aAAaC,SACzFN,EAAQP,KAAKc,SAAW,IACX,GAAKP,EAAQP,KAAKe,MAAMF,QACpCX,EAASF,KAAKH,QAAQG,KAAKe,MAAMR,IAC7BP,KAAKgB,gBAAgBV,KACxBN,KAAKiB,gBAAgBpB,EAAQI,KAAKiB,MAAMlB,MAAOE,KAC/CF,KAAKmB,gBAAe,SAErBb,EAAEc,kBAIGtB,EAASoB,MAAMlB,KAAMqB","file":"../../../plugins/restore_on_backspace/plugin.js","sourcesContent":["define([\n\t\"skylark-jquery\",\n\t\"../../Selectize\"\n],function($,Selectize) {\n\t/**\n\t * Plugin: \"restore_on_backspace\" (selectize.js)\n\t * Copyright (c) 2013 Brian Reavis & contributors\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n\t * file except in compliance with the License. You may obtain a copy of the License at:\n\t * http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing, software distributed under\n\t * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n\t * ANY KIND, either express or implied. See the License for the specific language\n\t * governing permissions and limitations under the License.\n\t *\n\t * @author Brian Reavis <brian@thirdroute.com>\n\t */\n\n\tSelectize.define('restore_on_backspace', function(options) {\n\t\tvar self = this;\n\n\t\toptions.text = options.text || function(option) {\n\t\t\treturn option[this.settings.labelField];\n\t\t};\n\n\t\tthis.onKeyDown = (function() {\n\t\t\tvar original = self.onKeyDown;\n\t\t\treturn function(e) {\n\t\t\t\tvar index, option;\n\t\t\t\tif (e.keyCode === KEY_BACKSPACE && this.$control_input.val() === '' && !this.$activeItems.length) {\n\t\t\t\t\tindex = this.caretPos - 1;\n\t\t\t\t\tif (index >= 0 && index < this.items.length) {\n\t\t\t\t\t\toption = this.options[this.items[index]];\n\t\t\t\t\t\tif (this.deleteSelection(e)) {\n\t\t\t\t\t\t\tthis.setTextboxValue(options.text.apply(this, [option]));\n\t\t\t\t\t\t\tthis.refreshOptions(true);\n\t\t\t\t\t\t}\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn original.apply(this, arguments);\n\t\t\t};\n\t\t})();\n\t});\n});"]}